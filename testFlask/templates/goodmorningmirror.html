<!DOCTYPE HTML>
<html lang="en">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="../static/mycss.css">

    <head>
        <title>Good Morning Mirror</title>
        <meta charset="utf-8">

        <link href="https://fonts.googleapis.com/css?family=Roboto:100" rel="stylesheet">

        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD7tydEW7tS2fFT0MaV4_Zj6n80TAkNOn8">
        </script>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>


        <script>
            //This refreshes the content div every 30 seconds.
            window.onunload = function foo() {window.clearInterval(listUpcomingEvents());};

            window.onload = function foo() {
                window.setInterval("refreshDiv()", 30 * 1000); //refresh's every 30 seconds
                window.setInterval(listUpcomingEvents, 30 *1000);};
            function refreshDiv() { document.getElementById("content").innerHTML = ""; }
        </script>


    </head>
    <body>

        <h1 id="greeting">
            <script>
                var date = new Date();
                var hour = date.getHours();
                var h1 = document.getElementById("greeting")

                if(hour < 12){
                    h1.innerText = "- Good Morning -";
                }
                else if(hour < 18){
                    h1.innerText = "- Good Afternoon -";
                }
                else{
                    h1.innerText = "- Good Evening -";
                }
            </script>
        </h1>

        <button id="authorize_button">
            <img src="../static/icons/SignIn.png" style=" padding: 0; width: 150px; height: 35px;"/>
        </button>

        <div id="weatherTimeAndWeatherIcon">
            <div id="timeHeader"></div>
            <div id="weather"></div>
            <img alt="weatherIcon" id="weatherIcon" src=""/>
        </div>

        <div id="mapAndTravelTime">
            <div id="travelTime"></div>
            <div id="map"></div>
        </div>

        <!--Add buttons to initiate auth sequence and sign out-->
        <button class="w3-button w3-black w3-round-xlarge" id="authorize_button" style="display: none;">Authorize</button>
        <button class="w3-button w3-black w3-round-xlarge" id="signout_button" style="display: none;">Sign Out</button>

        <p id="calendarTitle">Calendar</p>
        <div id="content"></div>

        <script src="../static/time.js"></script>
        <script src="../static/calendar.js"></script>
        <script src="../static/map.js"></script>
        <script src="../static/weather.js"></script>

        <script async defer src="https://apis.google.com/js/api.js"
                onload="this.onload=function(){};handleClientLoad()"
                onreadystatechange="if (this.readyState === 'complete') this.onload()">
        </script>
    </body>
</html>